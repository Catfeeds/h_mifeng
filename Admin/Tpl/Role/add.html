<include file="Index:pageHeader" />
<div class="column_Box mainAutoHeight">
	<div class="tab">
		<ul>
			<li class="current"><a href="javascript:">添加角色</a></li>
		</ul>
	</div>
	<div class="column_Box mainAutoHeight wrapBox">
        <div class="body">
			<form method="post" action="{:U('Role/insert')}" id="submitForm" name="submitForm">
				<table width="100%">
				  <tr>
					<td class="label">角色名</td>
					<td>
					  <input type="text" name="user_name" maxlength="20" value="{$user.role_name}" size="34"/></td>
				  </tr>
				  <tr>
					<td class="label">角色描述</td>
					<td>
						<textarea name="role_describe" cols="31" rows="6">{$user.role_describe}</textarea>
					</td>
				  </tr>
				  </table>
				<table cellspacing='1' id="list-table" style="margin-top:10px;">
				<volist name="articlecat_role" id="priv">
				 <tr>
				  <td width="18%" valign="top" class="first-cell">
					<input name="action_code[]" type="checkbox" <if condition="in_array('cat_'.$priv['cat_id'],$action_list)">checked</if> value="cat_{$priv.cat_id}" id="cat_{$priv.cat_id}" onclick="check(this);" class="checkbox">
					<label for="cat_{$priv.cat_id}">{$priv.cat_name}</label>
				  </td>
				  <td>
					<volist name="priv.chid" id="list" key="priv_list">
					<div style="width:200px;float:left;">
					<input type="checkbox" <if condition="in_array('cat_'.$list['cat_id'],$action_list)">checked</if> name="action_code[]" value="cat_{$list.cat_id}" id="cat_{$list.cat_id}" class="checkbox" />
					<label for="cat_{$list.cat_id}">{$list.cat_name}</label>
					</div>
					</volist>
				</td></tr>
				</volist>

				<tr>
				  <td align="left" colspan='2' class="first-cell">
				  	<input name="action_code[]" <if condition="in_array('Article',$action_list)">checked</if>  type="checkbox" value="Article" id="Article" class="checkbox">
					<label for="Article">蜜蜂精选</label>

				  	<input name="action_code[]" <if condition="in_array('Information',$action_list)">checked</if>  type="checkbox" value="Information" id="Information" class="checkbox">
					<label for="Information">幼儿干货</label>

				  	<input name="action_code[]" <if condition="in_array('Meeting',$action_list)">checked</if> type="checkbox" value="Meeting" id="Meeting" class="checkbox">
					<label for="Meeting">蜂会管理</label>

				  	<input name="action_code[]" <if condition="in_array('Course',$action_list)">checked</if> type="checkbox" value="Course" id="Course" class="checkbox">
					<label for="Course">课堂管理</label>
				  	
				  	<input name="action_code[]" <if condition="in_array('Mall',$action_list)">checked</if> type="checkbox" value="Mall" id="Mall" class="checkbox">
					<label for="Mall">积分商品</label>

					<input name="action_code[]" <if condition="in_array('User',$action_list)">checked</if> type="checkbox" value="User" id="User" class="checkbox">
					<label for="User">会员管理</label>

					<input name="action_code[]" <if condition="in_array('Reel',$action_list)">checked</if> type="checkbox" value="Reel" id="Reel" class="checkbox">
					<label for="Reel">卡卷管理</label>

					<input name="action_code[]" <if condition="in_array('Recruitment',$action_list)">checked</if> type="checkbox" value="Recruitment" id="Recruitment" class="checkbox">
					<label for="Recruitment">招聘管理</label>

					<input name="action_code[]" <if condition="in_array('Images',$action_list)">checked</if> type="checkbox" value="Images" id="Images" class="checkbox">
					<label for="Images">图片管理</label>

					<input name="action_code[]" <if condition="in_array('ContactUs',$action_list)">checked</if> type="checkbox" value="ContactUs" id="ContactUs" class="checkbox">
					<label for="ContactUs">留言管理</label>

				  	<input name="action_code[]" <if condition="in_array('Systems',$action_list)">checked</if> type="checkbox" value="Systems" id="Systems" class="checkbox">
					<label for="Systems">系统设置</label>

				  	<input name="action_code[]" <if condition="in_array('Privilege',$action_list)">checked</if> type="checkbox" value="Privilege" id="Privilege" class="checkbox">
					<label for="Privilege">权限管理</label>
				 </td>
				</tr>
				  <tr>
					<td align="center" colspan="2" >
					  <input type="checkbox" name="checkall" value="checkbox" onclick="checkAll(this.form, this);" class="checkbox" />全选
					  &nbsp;&nbsp;&nbsp;&nbsp;
					  <input type="submit"   name="Submit"   value="保存" class="button" />&nbsp;&nbsp;&nbsp;
					  <input type="reset" value="重置" class="button" />
					  <input type="hidden"   name="id"    value="{$user_id}" />
					  <input type="hidden"   name="act"   value="{$form_act}" />
					</td>
				  </tr>
				</table>
			</form>
        </div>
    </div>
</div>
<script language="javascript">
function checkAll(frm, checkbox)
{
  for (i = 0; i < frm.elements.length; i++)
  {
    if (frm.elements[i].name == 'action_code[]' || frm.elements[i].name == 'chkGroup')
    {
      frm.elements[i].checked = checkbox.checked;
    }
  }
}

function check(obj)
{
  var _this = $(obj);
  var target = _this.parent('td').next('td').find('input');
  var checked = _this.is(':checked');
  if(checked){
  	_this.attr('checked', 'checked');
  	target.attr('checked', 'checked');
  }else{
  	_this.removeAttr('checked');
  	target.removeAttr('checked');
  }
}
</script>
</body>
</html>